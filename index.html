<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Marked Writer</title>
  <link rel="stylesheet" href="css/pure-min.css">
  <link rel="stylesheet" href="css/layouts/blog.css">
  <script type="text/javascript">
    var md = require('./markdown.js');
    var async = require('async');
    var sqlite3 = require('sqlite3').verbose();
    var db = new sqlite3.Database('data.db');
      db.serialize(function() {
        /*
      db.run("CREATE TABLE lorem (info TEXT)");

      var stmt = db.prepare("INSERT INTO lorem VALUES (?)");
      for (var i = 0; i < 10; i++) {
          stmt.run("Ipsum " + i);
      }
      stmt.finalize();
      */

      db.each("SELECT rowid AS id, info FROM lorem", function(err, row) {
          console.log(row.id + ": " + row.info);
      });
    });

    db.close();
  </script>
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/ace.js"></script>
  <script type="text/javascript" src="js/keybinding-vim.js"></script>
  <script type="text/javascript" src="js/theme-dreamweaver.js"></script>
  <script type="text/javascript" src="js/mode-markdown.js"></script>
  <script type="text/javascript">
    function setEditorHeight() {
      var editorHeight = $(window).height() - $('#editor').offset().top - 20;
      $('#editor').css('height', editorHeight);
    }
    $(window).resize(setEditorHeight);
    $(document).ready(function () {
      setEditorHeight();
      // ace编辑器设置
      var editor = ace.edit('editor');
      editor.setTheme("ace/theme/dreamweaver");
      var MarkdownMode = require("ace/mode/markdown").Mode;
      editor.getSession().setMode(new MarkdownMode());
      $('.pure-menu a').click(function () {
        $('.pure-menu a').removeClass('pure-menu-select');
        $(this).addClass('pure-menu-select');
      });
      $('#perview').click(function () {
        var mdBlog = editor.getValue();
        $('#blog-content').html(md(mdBlog));
      });
    });
  </script>
</head>
<body onselectstart="return false">
<div class="pure-g-r content" id="layout">
  <div class="pure-u" id="nav">
    <img id="logo" src="img/markedwriter.png" />

    <div class="nav-inner">
      <a class="title">Marked Writer</a>
      <div class="pure-menu pure-menu-open">
        <ul>
          <li><a class="pure-menu-select" href="#">新博文</a></li>
          <li><a href="#">博文 <span class="blog-count">(2)</span></a></li>
          <li><a href="#">未发布</a></li>
          <li><a href="#">已发布</a></li>
          <li><a href="#">垃圾箱</a></li>
          <li class="pure-menu-heading">选项</li>
          <li><a href="#"><span class="blog-label-personal"></span>设置</a></li>
          <li><a href="#"><span class="blog-label-work"></span>关于</a></li>
          <li><a href="#"><span class="blog-label-travel"></span>帮助</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="pure-u-1" id="list">
    <div class="blog-item blog-item-selected pure-g">
      <div class="pure-u">
        <h4 class="blog-subject">C#入门经典文章系列全集，很好看的哦</h4>
        <h5 class="blog-time">2013年12月31日23:58:20</h5>
        <p class="blog-desc">
          Hey, I just wanted to check in with you from Toronto. I got here earlier today.
        </p>
      </div>
    </div>

  </div>

  <div class="pure-u-1" id="main">
    <div class="blog-content">
      <div class="blog-content-header pure-g">
        <div class="pure-u-2-3">
          <h1 class="blog-content-title">C#入门经典文章系列全集，很好看的哦</h1>
          <p class="blog-content-subtitle">
            <span>2013年12月31日23:59:45</span>
          </p>
        </div>

        <div class="pure-u-1-3 blog-content-controls">
          <button id="save" class="pure-button secondary-button">保存</button>
          <button id="publish" class="pure-button secondary-button">发布</button>
          <button id="perview" class="pure-button secondary-button">预览</button>
        </div>
      </div>

      <div class="blog-content-body">
        <div id="editor"></div>
        <div id="blog-content"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
